<!DOCTYPE html>
<html lang="ko">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>SDxí”Œë«í¼íŒ€ ì œì£¼ íŒ€ë°ì´ - Official Schedule</title>
    <link rel="stylesheet" as="style" crossorigin
        href="https://cdn.jsdelivr.net/gh/orioncactus/pretendard@v1.3.8/dist/web/static/pretendard.css" />
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">

    <script src="https://cdnjs.cloudflare.com/ajax/libs/matter-js/0.19.0/matter.min.js"></script>
    <style>
        :root {
            --primary: #FF6B00;
            --primary-dark: #E65100;
            --secondary: #2D9CDB;
            --accent: #FFD700;
            --bg: #F0F2F5;
            --surface: #FFFFFF;
            --text-main: #191F28;
            --text-sub: #8B95A1;
            --border: #E5E8EB;
            --shadow-sm: 0 2px 8px rgba(0, 0, 0, 0.06);
            --shadow-md: 0 8px 24px rgba(0, 0, 0, 0.12);
            --radius-lg: 20px;
            --radius-md: 12px;
            --safe-area-bottom: env(safe-area-inset-bottom);
        }

        body {
            font-family: 'Pretendard', -apple-system, BlinkMacSystemFont, system-ui, Roboto, sans-serif;
            margin: 0;
            padding: 0;
            background: var(--bg);
            color: var(--text-main);
            line-height: 1.6;
            -webkit-font-smoothing: antialiased;
        }

        .app-container {
            max-width: 480px;
            margin: 0 auto;
            background: var(--surface);
            min-height: 100vh;
            position: relative;
            box-shadow: var(--shadow-lg);
        }

        header {
            background: var(--surface);
            padding: 40px 24px 20px;
            border-bottom: 1px solid var(--border);
        }

        .nav-sticky {
            position: sticky;
            top: 0;
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(10px);
            z-index: 100;
            padding: 12px 10px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            gap: 6px;
            /* ê°­ ì¦ê°€ */
            border-bottom: 1px solid var(--border);
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.03);
            overflow-x: auto;
        }

        .nav-btn {
            background: none;
            border: none;
            padding: 8px 4px;
            border-radius: var(--radius-md);
            color: var(--text-sub);
            font-weight: 600;
            font-size: 0.9rem;
            cursor: pointer;
            transition: all 0.3s cubic-bezier(0.25, 0.8, 0.25, 1);
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 2px;
            position: relative;
            overflow: hidden;
            flex: 1;
            min-width: 60px;
        }

        /* REC ë²„íŠ¼ ê°„ê²© ë²Œë¦¬ê¸° */
        .nav-btn:last-child {
            margin-left: 8px;
            flex: 0 0 auto;
            /* í¬ê¸° ê³ ì • */
            min-width: 70px;
            /* ì•½ê°„ ë” ë„“ê²Œ */
            background: rgba(255, 107, 0, 0.05);
            /* ê°•ì¡° ë°°ê²½ */
        }

        header {
            background: linear-gradient(135deg, #FF6B00, #FF9E40);
            color: white;
            padding: 40px 24px 30px;
            border-radius: 0 0 30px 30px;
            position: relative;
            overflow: hidden;
        }

        header::before {
            content: '';
            position: absolute;
            top: -50%;
            left: -50%;
            width: 200%;
            height: 200%;
            background: radial-gradient(circle, rgba(255, 255, 255, 0.2) 0%, transparent 60%);
            animation: rotate 20s linear infinite;
        }

        @keyframes rotate {
            from {
                transform: rotate(0deg);
            }

            to {
                transform: rotate(360deg);
            }
        }

        .header-content {
            position: relative;
            z-index: 1;
        }

        .header-tag {
            background: rgba(255, 255, 255, 0.25);
            backdrop-filter: blur(4px);
            padding: 6px 12px;
            border-radius: 100px;
            font-size: 0.85rem;
            font-weight: 600;
            display: inline-block;
            margin-bottom: 12px;
            border: 1px solid rgba(255, 255, 255, 0.3);
        }

        h1 {
            margin: 0 0 8px 0;
            font-size: 1.8rem;
            letter-spacing: -0.03em;
        }

        .header-info {
            display: flex;
            gap: 8px;
            opacity: 0.9;
            font-size: 0.95rem;
            flex-wrap: wrap;
        }

        .header-info span {
            display: flex;
            align-items: center;
            gap: 4px;
        }

        .nav-sticky {
            position: sticky;
            top: 0;
            z-index: 100;
            background: rgba(255, 255, 255, 0.9);
            backdrop-filter: blur(10px);
            padding: 16px 20px;
            border-bottom: 1px solid rgba(0, 0, 0, 0.05);
            display: flex;
            gap: 10px;
        }

        .nav-btn {
            flex: 1;
            border: none;
            background: var(--bg);
            padding: 12px;
            border-radius: var(--radius-md);
            color: var(--text-sub);
            font-weight: 600;
            font-size: 0.95rem;
            cursor: pointer;
            transition: all 0.3s cubic-bezier(0.25, 0.8, 0.25, 1);
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 2px;
            position: relative;
            overflow: hidden;
        }

        .nav-btn span.date {
            font-size: 0.75rem;
            font-weight: 400;
            opacity: 0.8;
        }

        .nav-btn.active {
            background: var(--surface);
            color: var(--primary);
            box-shadow: var(--shadow-sm);
        }

        .nav-btn.active::after {
            content: '';
            position: absolute;
            bottom: 0;
            left: 50%;
            transform: translateX(-50%);
            width: 40%;
            height: 3px;
            background: var(--primary);
            border-radius: 3px 3px 0 0;
        }

        .tab-content {
            display: none;
            padding: 24px 20px;
            animation: slideUp 0.4s cubic-bezier(0.16, 1, 0.3, 1);
        }

        .tab-content.active {
            display: block;
        }

        @keyframes slideUp {
            from {
                opacity: 0;
                transform: translateY(20px);
            }

            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .card {
            background: var(--surface);
            border-radius: var(--radius-lg);
            padding: 24px;
            margin-bottom: 20px;
            box-shadow: var(--shadow-sm);
            border: 1px solid var(--border);
            transition: transform 0.2s;
        }

        .card-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 16px;
            padding-bottom: 12px;
            border-bottom: 1px solid var(--border);
        }

        .card-title {
            font-size: 1.1rem;
            font-weight: 700;
            color: var(--text-main);
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .card-title i {
            color: var(--primary);
        }

        .timeline {
            position: relative;
            padding-left: 24px;
            margin-top: 10px;
        }

        .timeline::before {
            content: '';
            position: absolute;
            left: 7px;
            top: 10px;
            bottom: 0;
            width: 2px;
            background: #E5E8EB;
        }

        .time-item {
            position: relative;
            margin-bottom: 30px;
        }

        .time-dot {
            position: absolute;
            left: -24px;
            top: 0;
            width: 16px;
            height: 16px;
            background: var(--surface);
            border: 3px solid var(--primary);
            border-radius: 50%;
            z-index: 2;
            box-shadow: 0 0 0 3px rgba(255, 107, 0, 0.1);
        }

        .time-item.highlight .time-dot {
            background: var(--primary);
            border-color: white;
            box-shadow: 0 0 0 3px var(--primary);
        }

        .time-item.free .time-dot {
            border-color: var(--secondary);
        }

        .time-header {
            display: flex;
            align-items: baseline;
            gap: 8px;
            margin-bottom: 8px;
        }

        .time-time {
            font-weight: 700;
            color: var(--primary);
            font-size: 1rem;
        }

        .time-title {
            font-weight: 600;
            color: var(--text-main);
            font-size: 1.05rem;
        }

        .time-card {
            background: #FAFAFA;
            border-radius: var(--radius-md);
            padding: 16px;
            border: 1px solid rgba(0, 0, 0, 0.03);
        }

        .time-desc {
            font-size: 0.9rem;
            color: var(--text-sub);
            margin-bottom: 10px;
        }

        .options-grid {
            display: grid;
            gap: 10px;
            margin-top: 12px;
        }

        .option-item {
            background: white;
            border: 1px solid var(--border);
            border-radius: 12px;
            padding: 12px 16px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            transition: all 0.2s;
        }

        .option-item:hover {
            border-color: var(--primary);
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.05);
        }

        .opt-info {
            flex: 1;
        }

        .opt-tag {
            font-size: 0.7rem;
            font-weight: 700;
            padding: 2px 6px;
            border-radius: 4px;
            margin-right: 6px;
        }

        .opt-tag.rec {
            background: #FFF0E6;
            color: var(--primary);
        }

        .opt-tag.normal {
            background: #F2F4F6;
            color: var(--text-sub);
        }

        .opt-name {
            font-weight: 600;
            font-size: 0.95rem;
        }

        .opt-price {
            font-size: 0.85rem;
            color: #E91E63;
            font-weight: 600;
            margin-top: 2px;
        }

        .btn-map {
            width: 36px;
            height: 36px;
            border-radius: 50%;
            background: #F2F4F6;
            color: var(--text-sub);
            display: flex;
            align-items: center;
            justify-content: center;
            text-decoration: none;
            transition: all 0.2s;
        }

        .btn-map:hover {
            background: #E5E8EB;
            color: var(--primary);
        }

        .budget-card {
            background: #212529;
            color: white;
            overflow: hidden;
        }

        .budget-total {
            text-align: center;
            padding: 20px 0;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
        }

        .budget-total h3 {
            margin: 0;
            font-size: 0.9rem;
            opacity: 0.7;
            font-weight: 400;
        }

        .budget-total .amount {
            font-size: 2rem;
            font-weight: 700;
            color: var(--accent);
            margin-top: 4px;
        }

        .budget-details {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 1px;
            background: rgba(255, 255, 255, 0.1);
        }

        .budget-col {
            background: #212529;
            padding: 16px 10px;
            text-align: center;
        }

        .budget-col .label {
            font-size: 0.75rem;
            opacity: 0.6;
            margin-bottom: 4px;
        }

        .budget-col .val {
            font-size: 0.95rem;
            font-weight: 600;
        }

        .roulette-container {
            text-align: center;
            padding: 20px 0;
        }

        /* ë§ˆë¸” ë ˆì´ìŠ¤ (Matter.js) */
        .race-container {
            width: 100%;
            background: #222;
            border-radius: 16px;
            padding: 0;
            margin-bottom: 20px;
            overflow: hidden;
            position: relative;
            border: 4px solid #333;
            height: 800px;
            /* ë†’ì´ í™•ì¥ */
            box-shadow: inset 0 0 20px rgba(0, 0, 0, 0.5);
        }

        /* ìº”ë²„ìŠ¤ê°€ ë“¤ì–´ê°ˆ ìë¦¬ */
        #matter-container {
            width: 100%;
            height: 100%;
        }

        .rank-board {
            background: white;
            border-radius: 12px;
            padding: 15px;
            margin-top: 15px;
            border: 1px solid #eee;
            display: none;
        }

        .rank-item {
            display: flex;
            justify-content: space-between;
            padding: 8px 0;
            border-bottom: 1px solid #f5f5f5;
            font-size: 0.9rem;
        }

        .rank-item:nth-child(1) {
            color: #FFD700;
            font-weight: 800;
            font-size: 1.1rem;
        }

        .rank-item:nth-child(2) {
            color: #C0C0C0;
            font-weight: 700;
        }

        .rank-item:nth-child(3) {
            color: #CD7F32;
            font-weight: 700;
        }

        .spin-btn {
            background: var(--primary);
            color: white;
            border: none;
            padding: 16px 48px;
            font-size: 1.1rem;
            font-weight: 700;
            border-radius: 100px;
            cursor: pointer;
            box-shadow: 0 4px 15px rgba(255, 107, 0, 0.3);
            transition: transform 0.1s;
        }

        .spin-btn:active {
            transform: scale(0.95);
        }

        .spin-btn.disabled {
            background: #ccc;
            cursor: not-allowed;
            box-shadow: none;
        }

        .modal-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.6);
            backdrop-filter: blur(4px);
            z-index: 1000;
            display: none;
            align-items: center;
            justify-content: center;
            opacity: 0;
            transition: opacity 0.3s;
        }

        .modal-overlay.show {
            opacity: 1;
        }

        .modal-card {
            background: white;
            width: 85%;
            max-width: 320px;
            border-radius: 24px;
            padding: 30px 20px;
            text-align: center;
            transform: scale(0.8);
            transition: transform 0.3s cubic-bezier(0.34, 1.56, 0.64, 1);
        }

        .modal-overlay.show .modal-card {
            transform: scale(1);
        }

        .modal-icon {
            font-size: 3rem;
            margin-bottom: 16px;
            display: block;
            animation: bounce 1s infinite;
        }

        @keyframes bounce {

            0%,
            100% {
                transform: translateY(0);
            }

            50% {
                transform: translateY(-10px);
            }
        }

        .fab {
            position: fixed;
            bottom: 30px;
            right: 30px;
            width: 56px;
            height: 56px;
            background: var(--primary);
            border-radius: 50%;
            box-shadow: 0 4px 12px rgba(255, 107, 0, 0.4);
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 1.5rem;
            cursor: pointer;
            z-index: 90;
            transition: transform 0.2s;
        }

        .fab:hover {
            transform: scale(1.1);
        }

        .badge {
            display: inline-block;
            padding: 4px 8px;
            border-radius: 6px;
            font-size: 0.75rem;
            font-weight: 600;
            margin-left: 6px;
        }

        .badge.blue {
            background: rgba(45, 156, 219, 0.15);
            color: var(--secondary);
        }

        .badge.red {
            background: rgba(233, 30, 99, 0.15);
            color: #E91E63;
        }

        .copy-btn {
            cursor: pointer;
            color: var(--text-sub);
            margin-left: 6px;
            font-size: 0.9rem;
        }

        .copy-btn:hover {
            color: var(--primary);
        }

        .info-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 12px;
        }

        .info-box {
            background: #F9FAFB;
            padding: 16px;
            border-radius: 12px;
            text-align: center;
        }

        .info-box i {
            font-size: 1.5rem;
            color: var(--primary);
            margin-bottom: 8px;
            display: block;
        }

        .info-box .label {
            font-size: 0.8rem;
            color: var(--text-sub);
            display: block;
            margin-bottom: 4px;
        }

        .info-box .val {
            font-size: 1rem;
            font-weight: 700;
        }

        /* ì¼ì •ë³„ ì˜ˆì‚° í‘œì‹œ */
        .day-budget-bar {
            display: flex;
            justify-content: space-between;
            align-items: center;
            background: linear-gradient(135deg, #f8f9fa 0%, #e9ecef 100%);
            border-radius: 12px;
            padding: 12px 8px;
            /* íŒ¨ë”© ì¶•ì†Œ */
            margin-bottom: 20px;
            border: 1px solid #e5e8eb;
        }

        .day-budget-item {
            flex: 1;
            display: flex;
            flex-direction: column;
            align-items: center;
            min-width: 0;
            padding: 0 2px;
        }

        .day-budget-item .label {
            font-size: 0.7rem;
            /* í°íŠ¸ ì¶•ì†Œ */
            color: var(--text-sub);
            margin-bottom: 2px;
            white-space: nowrap;
            letter-spacing: -0.5px;
            overflow: hidden;
            text-overflow: ellipsis;
            width: 100%;
            text-align: center;
        }

        .day-budget-item .val {
            font-size: 0.9rem;
            /* í°íŠ¸ ì¶•ì†Œ */
            font-weight: 700;
            color: var(--text-main);
            white-space: nowrap;
            letter-spacing: -0.5px;
        }

        .day-budget-item .val.spent {
            color: #E91E63;
        }

        .day-budget-item .val.remain {
            color: #4CAF50;
        }

        .day-budget-divider {
            width: 1px;
            height: 24px;
            background: #dee2e6;
            margin: 0 4px;
            /* ë§ˆì§„ ì¶•ì†Œ */
            flex-shrink: 0;
        }

        /* ì¼ì • ë¹„ìš© íƒœê·¸ */
        .cost-tag {
            display: inline-block;
            background: rgba(233, 30, 99, 0.1);
            color: #E91E63;
            padding: 2px 8px;
            border-radius: 6px;
            font-size: 0.75rem;
            font-weight: 600;
            margin-left: 8px;
        }

        .remain-tag {
            display: inline-block;
            background: rgba(76, 175, 80, 0.1);
            color: #4CAF50;
            padding: 2px 8px;
            border-radius: 6px;
            font-size: 0.7rem;
            font-weight: 600;
            margin-left: 4px;
        }

        /* ì˜ˆì‚° ê³„ì‚°ê¸° */
        .budget-input-group {
            display: flex;
            flex-direction: column;
            gap: 10px;
            margin-bottom: 20px;
        }

        .budget-input-row {
            display: flex;
            align-items: center;
            gap: 8px;
            padding: 10px 14px;
            background: #f8f9fa;
            border-radius: 10px;
            border: 1px solid #e5e8eb;
        }

        .budget-label {
            flex: 1;
            font-size: 0.9rem;
            font-weight: 500;
            color: var(--text-main);
        }

        .budget-input {
            width: 100px;
            padding: 8px 10px;
            border: 1px solid #ddd;
            border-radius: 8px;
            font-size: 0.9rem;
            text-align: right;
            font-family: inherit;
            transition: border-color 0.2s;
        }

        .budget-input:focus {
            outline: none;
            border-color: var(--primary);
        }

        .budget-unit {
            font-size: 0.85rem;
            color: var(--text-sub);
            min-width: 20px;
        }

        .budget-result {
            background: linear-gradient(135deg, #fff7ed 0%, #ffedd5 100%);
            border-radius: 12px;
            padding: 16px;
            border: 1px solid #fed7aa;
        }

        .budget-result-row {
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .remain-tag {
            display: none !important;
        }

        /* DB ì €ì¥ ìƒíƒœ í‘œì‹œ */
        .db-status {
            font-size: 0.75rem;
            padding: 4px 8px;
            border-radius: 6px;
            margin-left: 8px;
            display: inline-block;
        }

        .db-status.loading {
            background: #fff3cd;
            color: #856404;
        }

        .db-status.success {
            background: #d4edda;
            color: #155724;
        }

        .db-status.error {
            background: #f8d7da;
            color: #721c24;
        }

        .save-btn {
            background: var(--primary);
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 8px;
            font-weight: 600;
            cursor: pointer;
            margin-top: 12px;
            width: 100%;
            transition: all 0.2s;
        }

        .save-btn:hover {
            background: var(--primary-dark);
        }

        .save-btn:disabled {
            background: #ccc;
            cursor: not-allowed;
        }
    </style>
</head>

<body>

    <div class="app-container">
        <header>
            <div class="header-content">
                <span class="header-tag">ğŸŠ Jeju Team Day</span>
                <h1>SDx í”Œë«í¼íŒ€<br>ì œì£¼ë„ ì›Œí¬ìƒµ</h1>
                <div class="header-info">
                    <span><i class="far fa-calendar"></i> 2.5(ëª©) ~ 2.7(í† )</span>
                    <span><i class="far fa-user"></i> 10ëª…</span>
                    <span><i class="fas fa-map-marker-alt"></i> ì”¨ì‚¬ì´ë“œ ì•„ë´</span>
                </div>
            </div>
        </header>

        <nav class="nav-sticky">
            <button class="nav-btn active" onclick="switchTab('day1', this)">
                <span>Day 1</span>
                <span class="date">2.5 (ëª©)</span>
            </button>
            <button class="nav-btn" onclick="switchTab('day2', this)">
                <span>Day 2</span>
                <span class="date">2.6 (ê¸ˆ)</span>
            </button>
            <button class="nav-btn" onclick="switchTab('day3', this)">
                <span>Day 3</span>
                <span class="date">2.7 (í† )</span>
            </button>
            <button class="nav-btn" onclick="switchTab('info', this)">
                <span>Info</span>
                <span class="date">ì •ë³´/ì˜ˆì‚°</span>
            </button>
            <button class="nav-btn" onclick="switchTab('recreation', this)">
                <span>REC</span>
                <span class="date">ê²Œì„</span>
            </button>
        </nav>

        <div id="day1" class="tab-content active">
            <div class="card">
                <div class="card-header">
                    <div class="card-title"><i class="fas fa-plane-departure"></i> ë„ì°© ë° ì²´í¬ì¸</div>
                </div>
                <div class="day-budget-bar" id="day1-budget-bar">
                    <div class="day-budget-item">
                        <span class="label">Day1 ì˜ˆìƒë¹„ìš©</span>
                        <span class="val spent" id="day1-cost">~22ë§Œì›</span>
                    </div>
                    <div class="day-budget-divider"></div>
                    <div class="day-budget-item">
                        <span class="label">ëˆ„ì  ì‚¬ìš©</span>
                        <span class="val" id="day1-total">~22ë§Œì›</span>
                    </div>
                    <div class="day-budget-divider"></div>
                    <div class="day-budget-item">
                        <span class="label">1ì¸ë‹¹ ë‚¨ì€ì˜ˆì‚°</span>
                        <span class="val remain" id="day1-remain">~10ë§Œì›</span>
                    </div>
                </div>
                <div
                    style="background:#fff3e0; padding:10px 14px; border-radius:8px; margin-bottom:16px; font-size:0.8rem; color:#e65100;">
                    ğŸ’¡ ì´ ì˜ˆì‚° 300ë§Œì› (1ì¸ 30ë§Œì›) | í•­ê³µ + ë ŒíŠ¸/ê¸°ë¦„ í¬í•¨<br>
                    ğŸ  ìˆ™ì†Œë¹„: 1ì¸ 2ë§Œì› (ë³„ë„, ì˜ˆì‚° ë¯¸í¬í•¨) - ì´ì¬í™˜ ì„ ì„ì—ê²Œ 2ë§Œì› ì…ê¸ˆ ğŸ™
                </div>
                <div class="timeline">
                    <div class="time-item highlight">
                        <div class="time-dot"></div>
                        <div class="time-header">
                            <span class="time-time">17:40</span>
                            <span class="time-title">ê³µí•­ ì¶œë°œ</span>
                        </div>
                        <div class="time-card">
                            <div class="time-desc">âœˆï¸ 2026-02-05 (ëª©) 17:40 â†’ 18:55</div>
                            <div class="badge blue">ë¹„í–‰ì‹œê°„ ì•½ 75ë¶„</div>
                            <div class="cost-tag" style="margin-top:6px;">í•­ê³µ 1ì¸ 10ë§Œì›</div>
                        </div>
                    </div>

                    <div class="time-item">
                        <div class="time-dot"></div>
                        <div class="time-header">
                            <span class="time-time">19:30</span>
                            <span class="time-title">ë Œí„°ì¹´ ìˆ˜ë ¹ & ì´ë™</span>
                            <span class="cost-tag">ë ŒíŠ¸+ê¸°ë¦„ 1ì¸ 4ë§Œì›</span>
                        </div>
                        <div class="time-card">
                            <div class="time-desc">ë¹Œë¦¬ì¹´ ì…”í‹€ íƒ‘ìŠ¹ â†’ ì°¨ëŸ‰ ì¸ìˆ˜ (ì‹¼íƒ€í˜/ì˜ë Œí† )</div>
                            <div class="time-desc">ğŸš™ ìˆ™ì†Œë¡œ ì´ë™ (ì•½ 50ë¶„)</div>
                            <div class="time-desc" style="font-size:0.8rem; color:#E91E63; margin-top:4px;">ğŸ’° ì´ 40ë§Œì›
                                (10ëª… ê¸°ì¤€)</div>
                        </div>
                    </div>

                    <div class="time-item">
                        <div class="time-dot"></div>
                        <div class="time-header">
                            <span class="time-time">21:00</span>
                            <span class="time-title">ì €ë…ì‹ì‚¬: ì‹ ìš°ì„± í‘ë¼ì§€</span>
                            <span class="cost-tag" data-cost="day1-dinner">~5.0ë§Œì›</span>
                        </div>
                        <div class="time-card">
                            <div class="time-desc">ğŸ· ì¤‘ë¬¸ í‘ë¼ì§€ ë§›ì§‘ì—ì„œ ì €ë…</div>
                            <div class="options-grid">
                                <div class="option-item">
                                    <div class="opt-info">
                                        <div><span class="opt-tag rec">í™•ì •</span><span class="opt-name">ì‹ ìš°ì„± í‘ë¼ì§€</span>
                                        </div>
                                        <div class="opt-price">ì¸ë‹¹ 5ë§Œì›</div>
                                        <div style="font-size:0.75rem; color:#888;">ì¤‘ë¬¸ í‘ë¼ì§€ ë§›ì§‘ ğŸ”¥</div>
                                    </div>
                                    <a href="https://map.naver.com/p/search/ì‹ ìš°ì„±í‘ë¼ì§€%20ì¤‘ë¬¸" target="_blank"
                                        class="btn-map"><i class="fas fa-map"></i></a>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="time-item">
                        <div class="time-dot"></div>
                        <div class="time-header">
                            <span class="time-time">23:00</span>
                            <span class="time-title">ë³´ë“œê²Œì„</span>
                            <span class="cost-tag" data-cost="whiskey">~2.0ë§Œì›</span>
                        </div>
                        <div class="time-card">

                            <div class="time-desc">ğŸ² ì¶”ì²œ ê²Œì„: ë‹¬ë¬´í‹°, ì½”ë“œë„¤ì„, ë§ˆí”¼ì•„</div>
                            <div class="time-desc" style="color:#673AB7; font-weight:600; margin-top:6px;">ğŸ· ì–‘ì£¼ êµ¬ë§¤ ì˜ˆì •
                                (ì´ 20ë§Œì›)</div>
                            <div class="time-desc" style="font-size:0.8rem; color:#888;">ì˜ˆì‚°ì—ì„œ 1ì¸ë‹¹ 2ë§Œì› ì°¨ê°</div>
                            <div class="time-desc" style="color:#E91E63; font-weight:600; margin-top:6px;">ğŸ‘• ë²Œì¹™: í…Œë¬´ì˜·
                                ì…ê¸°, ì…ìˆ˜ğŸŠ
                                (ê¼´ì°ŒëŠ” ë‹¤ìŒë‚  ì°©ìš©!)</div>
                        </div>
                    </div>
                </div>

                <!-- Day 1 ì´ë™ê²½ë¡œ ì§€ë„ (ì´ë¯¸ì§€ ì•½ë„) -->

            </div>
        </div>

        <div id="day2" class="tab-content">
            <div class="card">
                <div class="card-header">
                    <div class="card-title"><i class="fas fa-flag-checkered"></i> 9.81íŒŒí¬ & ì•¡í‹°ë¹„í‹°</div>
                </div>
                <div class="day-budget-bar" id="day2-budget-bar">
                    <div class="day-budget-item">
                        <span class="label">Day2 ì˜ˆìƒë¹„ìš©</span>
                        <span class="val spent" id="day2-cost">~8.2ë§Œì›</span>
                    </div>
                    <div class="day-budget-divider"></div>
                    <div class="day-budget-item">
                        <span class="label">ëˆ„ì  ì‚¬ìš©</span>
                        <span class="val" id="day2-total">~24.2ë§Œì›</span>
                    </div>
                    <div class="day-budget-divider"></div>
                    <div class="day-budget-item">
                        <span class="label">1ì¸ë‹¹ ë‚¨ì€ì˜ˆì‚°</span>
                        <span class="val remain" id="day2-remain">~5.8ë§Œì›</span>
                    </div>
                </div>
                <div class="timeline">
                    <div class="time-item">
                        <div class="time-dot"></div>
                        <div class="time-header">
                            <span class="time-time">08:00</span>
                            <span class="time-title">ì•„ì¹¨ (ì„ íƒ)</span>
                            <span class="badge blue">íŒ€ ì„ íƒ</span>
                        </div>
                        <div class="time-card">
                            <div class="time-desc">ì¤‘ë¬¸ ê´€ê´‘ ë° ì•„ì¹¨ì‹ì‚¬ or íœ´ì‹</div>
                            <div class="options-grid">
                                <div class="option-item">
                                    <div class="opt-info">
                                        <div><span class="opt-tag rec">ì¶”ì²œ</span><span class="opt-name">ìˆ˜ë‘ë¦¬ë³´ë§ì¹¼êµ­ìˆ˜</span>
                                        </div>
                                        <div class="opt-price">~1.3ë§Œì›</div>
                                        <div style="font-size:0.75rem; color:#888;">ì›¨ì´íŒ… í•„ìˆ˜ ë§›ì§‘ ğŸœ</div>
                                    </div>
                                    <a href="https://map.naver.com/p/search/ìˆ˜ë‘ë¦¬ë³´ë§ì¹¼êµ­ìˆ˜" target="_blank" class="btn-map"><i
                                            class="fas fa-map"></i></a>
                                </div>
                                <div class="option-item">
                                    <div class="opt-info">
                                        <div><span class="opt-tag normal">ì˜µì…˜2</span><span class="opt-name">ì œì£¼í•œë¼êµ­ìˆ˜</span>
                                        </div>
                                        <div class="opt-price">~1.0ë§Œì›</div>
                                        <div style="font-size:0.75rem; color:#888;">ê³ ê¸°êµ­ìˆ˜/êµ­ë°¥</div>
                                    </div>
                                    <a href="https://map.naver.com/p/search/ì œì£¼í•œë¼êµ­ìˆ˜" target="_blank" class="btn-map"><i
                                            class="fas fa-map"></i></a>
                                </div>
                                <div class="option-item">
                                    <div class="opt-info">
                                        <div><span class="opt-tag normal">ì˜µì…˜3</span><span class="opt-name">ìƒˆìš°ì‹œ
                                                (ê¹€ë°¥)</span></div>
                                        <div class="opt-price">~0.8ë§Œì›</div>
                                        <div style="font-size:0.75rem; color:#888;">ë”±ìƒˆìš°ê¹€ë°¥ í¬ì¥</div>
                                    </div>
                                    <a href="https://map.naver.com/p/search/ìƒˆìš°ì‹œ" target="_blank" class="btn-map"><i
                                            class="fas fa-map"></i></a>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="time-item">
                        <div class="time-dot"></div>
                        <div class="time-header">
                            <span class="time-time">11:30</span>
                            <span class="time-title">ì ì‹¬ ì‹ë‹¹ ë„ì°©</span>
                            <span class="cost-tag" data-cost="day2-lunch">~2.4ë§Œì›</span>
                            <span class="remain-tag" id="remain-day2-lunch">ì”ì•¡ 8.6ë§Œì›</span>
                        </div>
                        <div class="time-card">
                            <div class="time-desc">ğŸ“ ì¤‘ë¬¸ê´€ê´‘ë‹¨ì§€ ë§›ì§‘ í›„ë³´êµ° (íƒ1)</div>
                            <div class="options-grid">
                                <div class="option-item">
                                    <div class="opt-info">
                                        <div><span class="opt-tag rec">ì¶”ì²œ</span><span class="opt-name">ê³ ì§‘ëŒìš°ëŸ­</span>
                                        </div>
                                        <div class="opt-price">~2.4ë§Œì›</div>
                                        <div style="font-size:0.75rem; color:#888;">ìš°ëŸ­ì¡°ë¦¼ ëŸ°ì¹˜ì„¸íŠ¸ ğŸŸ</div>
                                    </div>
                                    <a href="https://map.naver.com/p/search/ê³ ì§‘ëŒìš°ëŸ­ì¤‘ë¬¸ì " target="_blank" class="btn-map"><i
                                            class="fas fa-map"></i></a>
                                </div>
                                <div class="option-item">
                                    <div class="opt-info">
                                        <div><span class="opt-tag normal">í›„ë³´2</span><span class="opt-name">ì œì£¼ì˜¤ì„±</span>
                                        </div>
                                        <div class="opt-price">~2.5ë§Œì›</div>
                                        <div style="font-size:0.75rem; color:#888;">í†µê°ˆì¹˜ì¡°ë¦¼/êµ¬ì´ ì •ì‹</div>
                                    </div>
                                    <a href="https://map.naver.com/p/search/ì œì£¼ì˜¤ì„±" target="_blank" class="btn-map"><i
                                            class="fas fa-map"></i></a>
                                </div>
                                <div class="option-item">
                                    <div class="opt-info">
                                        <div><span class="opt-tag normal">í›„ë³´3</span><span class="opt-name">ì˜ˆì§€ì›</span>
                                        </div>
                                        <div class="opt-price">~2.0ë§Œì›</div>
                                        <div style="font-size:0.75rem; color:#888;">ì „ë³µëšë°°ê¸°/ì„±ê²Œë¯¸ì—­êµ­</div>
                                    </div>
                                    <a href="https://map.naver.com/p/search/ì˜ˆì§€ì›%20ì¤‘ë¬¸" target="_blank" class="btn-map"><i
                                            class="fas fa-map"></i></a>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="time-item highlight">
                        <div class="time-dot"></div>
                        <div class="time-header">
                            <span class="time-time">13:00</span>
                            <span class="time-title">9.81íŒŒí¬ ë ˆì´ì‹±</span>
                            <span class="badge red">í™•ì •</span>
                            <span class="cost-tag" data-cost="981">~3.7ë§Œì›</span>
                            <span class="remain-tag" id="remain-981">ì”ì•¡ 5ë§Œì›</span>
                        </div>
                        <div class="time-card">
                            <div class="time-desc">ğŸï¸ 3ì‹œê°„ í’€íŒ¨í‚¤ì§€ (ë ˆì´ì‹± + ì„œë°”ì´ë²Œ)</div>
                            <div class="time-desc" style="font-size:0.85rem; color:#666; margin-top:4px;">ğŸ“ ì œì£¼ì‹œ ì• ì›”ì ì²œë•ë¡œ
                                880-24</div>
                            <div style="margin-top:10px;">
                                <a href="https://map.naver.com/p/search/9.81íŒŒí¬" target="_blank" class="badge blue"
                                    style="text-decoration:none;">ì§€ë„ë³´ê¸°</a>
                            </div>
                        </div>
                    </div>

                    <div class="time-item">
                        <div class="time-dot"></div>
                        <div class="time-header">
                            <span class="time-time">16:00</span>
                            <span class="time-title">ì¹´í˜ íœ´ì‹ (9.81íŒŒí¬ or ì„œê·€í¬)</span>
                            <span class="cost-tag" data-cost="day2-tour">~0.8ë§Œì›</span>
                            <span class="remain-tag" id="remain-day2-tour">ì”ì•¡ 3.5ë§Œì›</span>
                        </div>
                        <div class="time-card">
                            <div class="time-desc">â˜• ì•¡í‹°ë¹„í‹° í›„ ì¹´í˜ì—ì„œ íœ´ì‹</div>
                            <div class="options-grid" style="margin-top:8px;">
                                <div class="option-item">
                                    <div class="opt-info">
                                        <div><span class="opt-tag rec">ê¸°ë³¸</span><span class="opt-name">Space Zero</span>
                                        </div>
                                        <div style="font-size:0.75rem; color:#888;">9.81íŒŒí¬ ë‚´ ìœ„ì¹˜, ë¹ˆë°± íœ´ì‹</div>
                                    </div>
                                </div>
                                <div class="option-item">
                                    <div class="opt-info">
                                        <div><span class="opt-tag normal">í›„ë³´</span><span class="opt-name">ì¹´í˜ ë£¨ì‹œì•„</span>
                                        </div>
                                        <div style="font-size:0.75rem; color:#888;">ì„œê·€í¬ ì•ˆë•ë©´, ë°•ìˆ˜ê¸°ì • ë·° ğŸŒŠ</div>
                                    </div>
                                    <a href="https://map.naver.com/p/search/ì¹´í˜ë£¨ì‹œì•„ ë³¸ì " target="_blank" class="btn-map"><i
                                            class="fas fa-map"></i></a>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="time-item">
                        <div class="time-dot"></div>
                        <div class="time-header">
                            <span class="time-time">17:00</span>
                            <span class="time-title">ì²œì œì—° í­í¬ êµ¬ê²½</span>
                            <span class="badge blue">ê´€ê´‘</span>
                        </div>
                        <div class="time-card">
                            <div class="time-desc">ğŸŒŠ ì²œì œì—° í­í¬ ì‚°ì±… (ì•½ 30ë¶„)</div>
                            <div class="time-desc" style="font-size:0.8rem; color:#888;">ì¤‘ë¬¸ ê·¼ì²˜ 3ëŒ€ í­í¬ ì¤‘ í•˜ë‚˜, ì„ ë…€ ì „ì„¤ë¡œ ìœ ëª…
                            </div>
                            <div style="margin-top:10px;">
                                <a href="https://map.naver.com/p/search/ì²œì œì—°í­í¬" target="_blank" class="badge blue"
                                    style="text-decoration:none;">ì§€ë„ë³´ê¸°</a>
                            </div>
                        </div>
                    </div>

                    <div class="time-item">
                        <div class="time-dot"></div>
                        <div class="time-header">
                            <span class="time-time">17:45</span>
                            <span class="time-title">ì„œê·€í¬ ì˜¬ë ˆì‹œì¥ ì´ë™</span>
                        </div>
                        <div class="time-card">
                            <div class="time-desc">ì²œì œì—° â†’ ì„œê·€í¬ (ì•½ 15ë¶„ ì†Œìš”)</div>
                        </div>
                    </div>

                    <div class="time-item">
                        <div class="time-dot"></div>
                        <div class="time-header">
                            <span class="time-time">18:30</span>
                            <span class="time-title">ì˜¬ë ˆì‹œì¥ ì¥ë³´ê¸° â†’ ìˆ™ì†Œ íŒŒí‹°</span>
                            <span class="cost-tag" data-cost="day2-dinner">~4.0ë§Œì›</span>
                            <span class="remain-tag" id="remain-day2-dinner">ì”ì•¡ 1.5ë§Œì›</span>
                        </div>
                        <div class="time-card">
                            <div class="time-desc">ğŸ›’ ì˜¬ë ˆì‹œì¥ì—ì„œ ì¥ë³´ê¸° í›„ ìˆ™ì†Œ íŒŒí‹°</div>
                            <div class="options-grid">
                                <div class="option-item">
                                    <div class="opt-info">
                                        <div><span class="opt-tag rec">í™•ì •</span><span class="opt-name">ë§¤ì¼ì˜¬ë ˆì‹œì¥</span>
                                        </div>
                                        <div class="opt-price">ì¸ë‹¹ 4ë§Œì›</div>
                                        <div style="font-size:0.75rem; color:#888;">íšŒ/í‘ë¼ì§€/ë¨¹ê±°ë¦¬ í¬ì¥ ğŸ¢</div>
                                    </div>
                                    <a href="https://map.naver.com/p/search/ì„œê·€í¬ë§¤ì¼ì˜¬ë ˆì‹œì¥" target="_blank"
                                        class="btn-map"><i class="fas fa-map"></i></a>
                                </div>
                            </div>
                            <div class="time-desc" style="margin-top:10px;">ğŸ² ìˆ™ì†Œì—ì„œ ê²Œì„ íƒ€ì„!</div>

                        </div>
                    </div>
                </div>

                <!-- Day 2 ì´ë™ê²½ë¡œ ì§€ë„ (ì´ë¯¸ì§€ ì•½ë„) -->

            </div>
        </div>

        <div id="day3" class="tab-content">
            <div class="card">
                <div class="card-header">
                    <div class="card-title"><i class="fas fa-plane-arrival"></i> ì²´í¬ì•„ì›ƒ ë° ê·€ê°€</div>
                </div>
                <div class="day-budget-bar" id="day3-budget-bar">
                    <div class="day-budget-item">
                        <span class="label">Day3 ì˜ˆìƒë¹„ìš©</span>
                        <span class="val spent" id="day3-cost">0ì›</span>
                    </div>
                    <div class="day-budget-divider"></div>
                    <div class="day-budget-item">
                        <span class="label">ì´ ì‚¬ìš©</span>
                        <span class="val" id="day3-total">~24.2ë§Œì›</span>
                    </div>
                    <div class="day-budget-divider"></div>
                    <div class="day-budget-item">
                        <span class="label">1ì¸ë‹¹ ìµœì¢…ì”ì•¡</span>
                        <span class="val remain" id="day3-remain">~5.8ë§Œì›</span>
                    </div>
                </div>
                <div class="timeline">
                    <div class="time-item">
                        <div class="time-dot"></div>
                        <div class="time-header">
                            <span class="time-time">07:30</span>
                            <span class="time-title">ì¡°ê¸° ë³µê·€íŒ€ ë°˜ë‚©</span>
                            <span class="badge blue">ì„ íƒ</span>
                        </div>
                        <div class="time-card">
                            <div class="time-desc">ğŸš— ë¹Œë¦¬ì¹´ ë°˜ë‚© (ì˜¤ì „ ë¹„í–‰ê¸°)</div>
                            <div class="time-desc">ì…”í‹€ íƒ‘ìŠ¹ â†’ ê³µí•­ ì´ë™</div>
                        </div>
                    </div>

                    <div class="time-item">
                        <div class="time-dot"></div>
                        <div class="time-header">
                            <span class="time-time">10:00</span>
                            <span class="time-title">ìˆ™ì†Œ ì²´í¬ì•„ì›ƒ</span>
                        </div>
                        <div class="time-card">
                            <div class="time-desc">ğŸ  ì§ ì •ë¦¬ ë° ìˆ™ì†Œ í‡´ì‹¤</div>
                        </div>
                    </div>

                    <div class="time-item">
                        <div class="time-dot"></div>
                        <div class="time-header">
                            <span class="time-time">12:00</span>
                            <span class="time-title">ë ŒíŠ¸ì¹´ ìµœì¢… ë°˜ë‚©</span>
                        </div>
                        <div class="time-card">
                            <div class="time-desc">ğŸš— ë¹Œë¦¬ì¹´ ë°˜ë‚© (ì˜¤í›„ ë¹„í–‰ê¸°)</div>
                            <div class="time-desc" style="font-size:0.8rem; color:#888;">ìš´ì „ì: ì‹ ìš°ì„± ì „ì„, ê¹€ì§€ì„­ ì „ì„</div>
                        </div>
                    </div>

                    <div class="time-item highlight free">
                        <div class="time-dot" style="background:var(--secondary); border-color:var(--secondary);"></div>
                        <div class="time-header">
                            <span class="time-time" style="color:var(--secondary);">12:00 ~</span>
                            <span class="time-title">ê°œë³„ ê·€ê°€</span>
                        </div>
                        <div class="time-card" style="border-left: 4px solid var(--secondary); background: #F0F9FF;">
                            <div class="time-desc" style="font-weight:600; color:#005580;">ğŸ‰ ê³µì‹ ì¼ì • ì¢…ë£Œ! ìˆ˜ê³ í•˜ì…¨ìŠµë‹ˆë‹¤!</div>
                            <div class="time-desc">ê°ì í•­ê³µí¸ì— ë§ì¶° ê°œë³„ ê·€ê°€</div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <div id="info" class="tab-content">
            <div class="card budget-card">
                <div class="budget-total">
                    <h3>1ì¸ë‹¹ ì˜ˆì‚°</h3>
                    <div class="amount">350,000ì›</div>
                </div>
                <div class="budget-details">
                    <div class="budget-col">
                        <span class="label">í•­ê³µê¶Œ</span>
                        <div class="val">10ë§Œì›</div>
                    </div>
                    <div class="budget-col">
                        <span class="label">ë ŒíŠ¸+ê¸°ë¦„</span>
                        <div class="val">4ë§Œì›</div>
                    </div>
                    <div class="budget-col">
                        <span class="label">ì‹ë¹„/í™œë™</span>
                        <div class="val">~16ë§Œì›</div>
                    </div>
                </div>
                <div
                    style="padding:12px 16px; background:rgba(255,255,255,0.1); text-align:center; font-size:0.8rem; opacity:0.7;">
                    ìˆ™ì†Œ: 1ì¸ 2ë§Œì› (ì´ì¬í™˜ ì„ ì„ì—ê²Œ 2ë§Œì› ì…ê¸ˆ) | ì´ ì˜ˆì‚°: 350ë§Œì› (10ëª…)
                </div>
            </div>

            <div class="card">
                <div class="card-header">
                    <div class="card-title">ğŸ  ìˆ™ì†Œ & ì°¨ëŸ‰ ì •ë³´</div>
                </div>
                <div class="info-grid">
                    <div class="info-box">
                        <i class="fas fa-hotel"></i>
                        <span class="label">ìˆ™ì†Œëª…</span>
                        <div class="val">ì”¨ì‚¬ì´ë“œ ì•„ë´</div>
                        <div style="font-size:0.7rem; color:#9C27B0; margin-top:4px;">1ì¸ 2ë§Œì› | ì´ì¬í™˜ ì„ ì„ì—ê²Œ 2ë§Œì› ì…ê¸ˆ ï¿½</div>
                    </div>
                    <div class="info-box">
                        <i class="fas fa-car"></i>
                        <span class="label">ìš´ì „ì</span>
                        <div class="val">ì‹ ìš°ì„±, ê¹€ì§€ì„­</div>
                    </div>
                </div>
                <div style="margin-top:12px; text-align:center;">
                    <a href="https://map.naver.com/p/search/ì”¨ì‚¬ì´ë“œì•„ë´" target="_blank" class="btn-link"
                        style="color:var(--primary); text-decoration:none; font-weight:600;">ğŸ“ ë„¤ì´ë²„ ì§€ë„ ë³´ê¸°</a>
                </div>
            </div>

            <div class="card">
                <div class="card-header">
                    <div class="card-title">ğŸ’° ì˜ˆì‚° ê³„ì‚°ê¸°</div>
                    <button id="unlock-btn" onclick="unlockBudget()"
                        style="padding:6px 12px; background:#f0f0f0; border:1px solid #ddd; border-radius:8px; font-size:0.8rem; cursor:pointer;">
                        ğŸ”’ ì ê¸ˆí•´ì œ
                    </button>
                </div>
                <div style="padding: 10px 0;">
                    <div style="font-size:0.8rem; color:var(--text-sub); margin-bottom:12px;">
                        <span id="budget-status">ğŸ”’ ìˆ˜ì •í•˜ë ¤ë©´ ì ê¸ˆí•´ì œë¥¼ ëˆŒëŸ¬ì£¼ì„¸ìš”</span>
                    </div>

                    <div class="budget-input-group">
                        <div class="budget-input-row">
                            <span class="budget-label">í•­ê³µê¶Œ</span>
                            <input type="number" id="cost-flight" value="100000" class="budget-input"
                                oninput="onBudgetChange()" disabled>
                            <span class="budget-unit">ì›</span>
                        </div>
                        <div class="budget-input-row">
                            <span class="budget-label">ë ŒíŠ¸+ê¸°ë¦„</span>
                            <input type="number" id="cost-rent" value="40000" class="budget-input"
                                oninput="onBudgetChange()" disabled>
                            <span class="budget-unit">ì›</span>
                        </div>
                        <div class="budget-input-row">
                            <span class="budget-label">Day1 ì €ë…</span>
                            <input type="number" id="cost-day1-dinner" value="50000" class="budget-input"
                                oninput="onBudgetChange()" disabled>
                            <span class="budget-unit">ì›</span>
                        </div>
                        <div class="budget-input-row">
                            <span class="budget-label">ì–‘ì£¼ êµ¬ë§¤</span>
                            <input type="number" id="cost-whiskey" value="20000" class="budget-input"
                                oninput="onBudgetChange()" disabled>
                            <span class="budget-unit">ì›</span>
                        </div>
                        <div class="budget-input-row">
                            <span class="budget-label">Day2 9.81íŒŒí¬</span>
                            <input type="number" id="cost-981" value="37000" class="budget-input"
                                oninput="onBudgetChange()" disabled>
                            <span class="budget-unit">ì›</span>
                        </div>
                        <div class="budget-input-row">
                            <span class="budget-label">Day2 ì ì‹¬ (í›„ë³´ì„ íƒ)</span>
                            <input type="number" id="cost-day2-lunch" value="24000" class="budget-input"
                                oninput="onBudgetChange()" disabled>
                            <span class="budget-unit">ì›</span>
                        </div>
                        <div class="budget-input-row">
                            <span class="budget-label">Day2 ì˜¤í›„(ì¹´í˜)</span>
                            <input type="number" id="cost-day2-tour" value="8000" class="budget-input"
                                oninput="onBudgetChange()" disabled>
                            <span class="budget-unit">ì›</span>
                        </div>
                        <div class="budget-input-row">
                            <span class="budget-label">Day2 ì €ë…(ì¥ë³´ê¸°)</span>
                            <input type="number" id="cost-day2-dinner" value="40000" class="budget-input"
                                oninput="onBudgetChange()" disabled>
                            <span class="budget-unit">ì›</span>
                        </div>
                        <div id="custom-budget-items"></div>
                        <button id="add-item-btn" onclick="addBudgetItem()"
                            style="display:none; width:100%; padding:10px; margin-top:10px; background:#f8f9fa; border:2px dashed #ddd; border-radius:10px; color:#888; font-size:0.9rem; cursor:pointer;">
                            â• í•­ëª© ì¶”ê°€
                        </button>
                    </div>

                    <div class="budget-result">
                        <div class="budget-result-row">
                            <span>ì´ ì˜ˆìƒ ë¹„ìš©</span>
                            <span id="total-cost"
                                style="font-size:1.3rem; font-weight:700; color:var(--primary);">294,000ì›</span>
                        </div>
                        <div class="budget-result-row" style="margin-top:8px;">
                            <span>ì˜ˆì‚° 35ë§Œì› ê¸°ì¤€</span>
                            <span id="remaining-budget" style="font-weight:600; color:#4CAF50;">+56,000ì› ì—¬ìœ </span>
                        </div>
                        <button class="save-btn" id="save-budget-btn" onclick="saveBudgetToDB()">
                            ğŸ’¾ DBì— ì €ì¥í•˜ê¸°
                        </button>
                        <div id="db-status" style="text-align:center; margin-top:8px;"></div>
                    </div>
                </div>
            </div>
        </div>

        <div id="recreation" class="tab-content">
            <div class="card">
                <div class="card-header">
                    <div class="card-title">ğŸ± ìˆœì„œ ì •í•˜ê¸°</div>
                </div>
                <div class="roulette-container">
                    <div class="race-container">
                        <div id="matter-container"></div>
                    </div>

                    <div class="rank-board" id="rankBoard">
                        <div style="text-align:center; font-weight:bold; margin-bottom:10px;">ğŸ† ë„ì°© ìˆœìœ„</div>
                        <div id="rankList"></div>
                    </div>

                    <div style="margin-bottom:20px; margin-top:20px;">
                        <input type="text" id="rouletteNames" value="ê¹€ì§€ì„­,ë°•ë²”ì§„,ì†ì˜ê¸¸,ì‹ ì˜ˆë¦¬,ì‹ ìš°ì„±,ì´ì¬í™˜,ì„í˜œì •,ì¥ë¯¼í•œ,ì¡°ì˜¥ë˜,í™ì˜ˆì§„"
                            style="width:80%; padding:10px; border:1px solid #ddd; border-radius:8px; text-align:center;">
                    </div>
                    <button class="spin-btn" id="raceBtn" onclick="startMarbleRun()">START RUN</button>
                </div>
            </div>


        </div>



        <div class="fab" onclick="window.scrollTo({top:0, behavior:'smooth'})">
            <i class="fas fa-arrow-up"></i>
        </div>

    </div>

    <script>
        // ========================================
        // ğŸ’° ì˜ˆì‚° ì¤‘ì•™ ê´€ë¦¬ ì‹œìŠ¤í…œ
        // ========================================
        const BUDGET_CONFIG = {
            totalBudgetPerPerson: 350000, // 1ì¸ë‹¹ ì´ ì˜ˆì‚° 35ë§Œì›
            costs: {
                flight: 100000,      // í•­ê³µê¶Œ
                rent: 40000,         // ë ŒíŠ¸+ê¸°ë¦„
                day1Dinner: 50000,   // Day1 ì €ë… (ì‹ ìš°ì„± í‘ë¼ì§€)
                whiskey: 20000,      // ì–‘ì£¼ (20ë§Œì›/10ëª…)
                day2Lunch: 24000,    // Day2 ì ì‹¬
                park981: 37000,      // Day2 9.81íŒŒí¬
                day2Cafe: 8000,      // Day2 ì¹´í˜
                day2Dinner: 40000    // Day2 ì €ë… (ì˜¬ë ˆì‹œì¥)
            }
        };

        // Dayë³„ ë¹„ìš© ê³„ì‚°
        function calcDayBudgets() {
            const c = BUDGET_CONFIG.costs;
            const customTotal = c.customTotal || 0;
            const day1 = c.flight + c.rent + c.day1Dinner + c.whiskey;
            const day2 = c.day2Lunch + c.park981 + c.day2Cafe + c.day2Dinner;
            const day3 = customTotal; // ì»¤ìŠ¤í…€ í•­ëª©ì€ Day3ì— í‘œì‹œ
            const total = day1 + day2 + day3;
            // í•­ê³µê¶Œ(10ë§Œì›)ì€ ì„ ê²°ì œ/ê³ ì •ë¹„ìš©ìœ¼ë¡œ ê°„ì£¼í•˜ì—¬ ì”ì•¡ ê³„ì‚°ì—ì„œ ì œì™¸
            const remaining = BUDGET_CONFIG.totalBudgetPerPerson - (total - c.flight);

            return {
                day1: { cost: day1, cumulative: day1, remaining: BUDGET_CONFIG.totalBudgetPerPerson - day1 },
                day2: { cost: day2, cumulative: day1 + day2, remaining: BUDGET_CONFIG.totalBudgetPerPerson - day1 - day2 },
                day3: { cost: day3, cumulative: total, remaining: remaining },
                total: total,
                remaining: remaining
            };
        }

        // ê¸ˆì•¡ í¬ë§· (ë§Œì› ë‹¨ìœ„)
        function formatWon(amount) {
            if (amount >= 10000) {
                const man = amount / 10000;
                return man % 1 === 0 ? `${man}ë§Œì›` : `${man.toFixed(1)}ë§Œì›`;
            }
            return `${amount.toLocaleString()}ì›`;
        }

        // ëª¨ë“  ì˜ˆì‚° í‘œì‹œ ì—…ë°ì´íŠ¸
        function updateAllBudgetDisplays() {
            const budgets = calcDayBudgets();

            // Day 1 ì˜ˆì‚°ë°”
            const day1Cost = document.getElementById('day1-cost');
            const day1Total = document.getElementById('day1-total');
            const day1Remain = document.getElementById('day1-remain');
            if (day1Cost) day1Cost.textContent = '~' + formatWon(budgets.day1.cost);
            if (day1Total) day1Total.textContent = '~' + formatWon(budgets.day1.cumulative);
            if (day1Remain) day1Remain.textContent = '~' + formatWon(budgets.day1.remaining);

            // Day 2 ì˜ˆì‚°ë°”
            const day2Cost = document.getElementById('day2-cost');
            const day2Total = document.getElementById('day2-total');
            const day2Remain = document.getElementById('day2-remain');
            if (day2Cost) day2Cost.textContent = '~' + formatWon(budgets.day2.cost);
            if (day2Total) day2Total.textContent = '~' + formatWon(budgets.day2.cumulative);
            if (day2Remain) day2Remain.textContent = '~' + formatWon(budgets.day2.remaining);

            // Day 3 ì˜ˆì‚°ë°”
            const day3Cost = document.getElementById('day3-cost');
            const day3Total = document.getElementById('day3-total');
            const day3Remain = document.getElementById('day3-remain');
            if (day3Cost) day3Cost.textContent = formatWon(budgets.day3.cost);
            if (day3Total) day3Total.textContent = '~' + formatWon(budgets.day3.cumulative);
            if (day3Remain) day3Remain.textContent = '~' + formatWon(budgets.day3.remaining);

            // Info í˜ì´ì§€ ì˜ˆì‚° ê³„ì‚°ê¸°
            const totalCost = document.getElementById('total-cost');
            const remainingBudget = document.getElementById('remaining-budget');
            if (totalCost) totalCost.textContent = budgets.total.toLocaleString() + 'ì›';
            if (remainingBudget) {
                if (budgets.remaining >= 0) {
                    remainingBudget.textContent = '+' + budgets.remaining.toLocaleString() + 'ì› ì—¬ìœ ';
                    remainingBudget.style.color = '#4CAF50';
                } else {
                    remainingBudget.textContent = budgets.remaining.toLocaleString() + 'ì› ì´ˆê³¼';
                    remainingBudget.style.color = '#E91E63';
                }
            }

            // ì˜ˆì‚° ê³„ì‚°ê¸° input ê¸°ë³¸ê°’ ë™ê¸°í™”
            const costInputs = {
                'cost-flight': BUDGET_CONFIG.costs.flight,
                'cost-rent': BUDGET_CONFIG.costs.rent,
                'cost-day1-dinner': BUDGET_CONFIG.costs.day1Dinner,
                'cost-981': BUDGET_CONFIG.costs.park981,
                'cost-day2-lunch': BUDGET_CONFIG.costs.day2Lunch,
                'cost-day2-tour': BUDGET_CONFIG.costs.day2Cafe,
                'cost-day2-dinner': BUDGET_CONFIG.costs.day2Dinner
            };
            for (const [id, value] of Object.entries(costInputs)) {
                const input = document.getElementById(id);
                if (input) input.value = value;
            }
        }

        // ========================================
        // ğŸ”— Supabase DB API ì—°ë™
        // ========================================
        const SUPABASE_URL = 'https://oiyzxdrssxobsqjtlyjf.supabase.co';
        const SUPABASE_KEY = 'sb_publishable_n8CptUQG5FADwx5uHMDIdw_C9G6yUA-';

        // Supabase REST API í˜¸ì¶œ í—¬í¼
        async function supabaseRequest(table, method = 'GET', body = null, select = '*') {
            const headers = {
                'apikey': SUPABASE_KEY,
                'Authorization': `Bearer ${SUPABASE_KEY}`,
                'Content-Type': 'application/json',
                'Prefer': method === 'POST' ? 'return=representation' : 'return=minimal'
            };

            let url = `${SUPABASE_URL}/rest/v1/${table}`;
            if (method === 'GET') {
                url += `?select=${select}&order=created_at.desc&limit=1`;
            }
            if (method === 'PATCH') {
                url += '?id=eq.1'; // í•­ìƒ id=1 ë ˆì½”ë“œ ì—…ë°ì´íŠ¸
            }

            const options = { method, headers };
            if (body) options.body = JSON.stringify(body);

            const response = await fetch(url, options);
            if (!response.ok) {
                throw new Error(`Supabase error: ${response.status}`);
            }
            return method === 'GET' ? response.json() : response;
        }

        // DBì—ì„œ ì˜ˆì‚° ë°ì´í„° ë¡œë“œ
        async function loadBudgetFromDB() {
            const statusEl = document.getElementById('db-status');
            try {
                statusEl.innerHTML = '<span class="db-status loading">ğŸ“¡ DB ì—°ê²° ì¤‘...</span>';

                const data = await supabaseRequest('budget');

                if (data && data.length > 0) {
                    const budgetData = data[0];
                    // BUDGET_CONFIG ì—…ë°ì´íŠ¸
                    if (budgetData.total_budget_per_person) {
                        BUDGET_CONFIG.totalBudgetPerPerson = budgetData.total_budget_per_person;
                    }
                    if (budgetData.costs) {
                        Object.assign(BUDGET_CONFIG.costs, budgetData.costs);
                    }

                    // ì»¤ìŠ¤í…€ í•­ëª©ë“¤ UIì— ë Œë”ë§
                    renderCustomItemsFromDB();

                    updateAllBudgetDisplays();
                    statusEl.innerHTML = '<span class="db-status success">âœ… DBì—ì„œ ë¶ˆëŸ¬ì˜´</span>';

                    setTimeout(() => { statusEl.innerHTML = ''; }, 3000);
                } else {
                    statusEl.innerHTML = '<span class="db-status error">âš ï¸ ê¸°ë³¸ê°’ ì‚¬ìš© ì¤‘</span>';
                }
            } catch (error) {
                console.error('DB Load Error:', error);
                statusEl.innerHTML = '<span class="db-status error">âŒ DB ì—°ê²° ì‹¤íŒ¨ (ê¸°ë³¸ê°’ ì‚¬ìš©)</span>';
            }
        }

        // DBì—ì„œ ë¶ˆëŸ¬ì˜¨ ì»¤ìŠ¤í…€ í•­ëª©ë“¤ì„ UIì— ë Œë”ë§
        function renderCustomItemsFromDB() {
            const container = document.getElementById('custom-budget-items');
            container.innerHTML = ''; // ê¸°ì¡´ í•­ëª© ì‚­ì œ
            customItemCount = 0;

            const customItems = BUDGET_CONFIG.costs.customItems || [];
            customItems.forEach(item => {
                addBudgetItemFromData(item.label, item.value, item.confirmed);
            });
        }

        // DBì— ì˜ˆì‚° ë°ì´í„° ì €ì¥
        async function saveBudgetToDB() {
            const statusEl = document.getElementById('db-status');
            const saveBtn = document.getElementById('save-budget-btn');

            try {
                saveBtn.disabled = true;
                saveBtn.textContent = 'ì €ì¥ ì¤‘...';
                statusEl.innerHTML = '<span class="db-status loading">ğŸ“¤ ì €ì¥ ì¤‘...</span>';

                const budgetData = {
                    total_budget_per_person: BUDGET_CONFIG.totalBudgetPerPerson,
                    costs: BUDGET_CONFIG.costs,
                    updated_at: new Date().toISOString()
                };

                // ë¨¼ì € PATCH ì‹œë„ (ê¸°ì¡´ ë ˆì½”ë“œ ì—…ë°ì´íŠ¸)
                try {
                    await supabaseRequest('budget', 'PATCH', budgetData);
                } catch (e) {
                    // PATCH ì‹¤íŒ¨ì‹œ POSTë¡œ ìƒˆ ë ˆì½”ë“œ ìƒì„±
                    await supabaseRequest('budget', 'POST', { id: 1, ...budgetData });
                }

                statusEl.innerHTML = '<span class="db-status success">âœ… ì €ì¥ ì™„ë£Œ!</span>';
                setTimeout(() => { statusEl.innerHTML = ''; }, 3000);
            } catch (error) {
                console.error('DB Save Error:', error);
                statusEl.innerHTML = `<span class="db-status error">âŒ ${error.message}</span>`;
            } finally {
                saveBtn.disabled = false;
                saveBtn.textContent = 'ğŸ’¾ DBì— ì €ì¥í•˜ê¸°';
            }
        }


        // í˜ì´ì§€ ë¡œë“œì‹œ ì˜ˆì‚° ì—…ë°ì´íŠ¸ ë° ì§€ë„ ì´ˆê¸°í™”
        document.addEventListener('DOMContentLoaded', async function () {
            // ë¨¼ì € DBì—ì„œ ì˜ˆì‚° ë°ì´í„° ë¡œë“œ ì‹œë„
            await loadBudgetFromDB();

            // ê·¸ í›„ ëª¨ë“  í‘œì‹œ ì—…ë°ì´íŠ¸
            updateAllBudgetDisplays();

            // ì§€ë„ ì´ˆê¸°í™”
            setTimeout(() => {
                // Day 1 ì§€ë„: ê³µí•­ â†’ ìˆ™ì†Œ â†’ ì‹ë‹¹
                initJejuMap('map-day1', ['airport', 'accommodation', 'dinner1']);
                // Day 2 ì§€ë„: 9.81íŒŒí¬ â†’ ì²œì œì—° í­í¬ â†’ ì˜¬ë ˆì‹œì¥ â†’ ìˆ™ì†Œ
                initJejuMap('map-day2', ['park981', 'waterfall', 'market', 'accommodation']);
            }, 500);
        });

        function switchTab(tabId, btn) {
            document.querySelectorAll('.tab-content').forEach(el => el.classList.remove('active'));
            document.querySelectorAll('.nav-btn').forEach(el => el.classList.remove('active'));

            document.getElementById(tabId).classList.add('active');
            btn.classList.add('active');

            window.scrollTo({ top: 0, behavior: 'smooth' });
        }

        // Matter.js Aliases
        const Engine = Matter.Engine,
            Render = Matter.Render,
            Runner = Matter.Runner,
            Bodies = Matter.Bodies,
            Composite = Matter.Composite,
            Events = Matter.Events,
            Body = Matter.Body,
            Constraint = Matter.Constraint;

        let engine, render, runner;
        let isRunning = false;
        let rankings = [];
        const colors = ['#FF6B00', '#2D9CDB', '#FFD700', '#4CAF50', '#9C27B0', '#E91E63', '#795548', '#607D8B'];

        // í…ìŠ¤íŠ¸ ë Œë”ë§
        const renderText = function () {
            if (!render) return;
            const context = render.context;
            const bodies = Composite.allBodies(engine.world);

            context.font = "bold 12px Pretendard";
            context.textAlign = "center";
            context.textBaseline = "middle";
            context.fillStyle = "#fff";

            bodies.forEach(body => {
                if (body.label && !['peg', 'wall', 'ground', 'spinner', 'slope'].includes(body.label)) {
                    const { x, y } = body.position;
                    context.save();
                    context.translate(x, y);
                    context.fillText(body.label.substring(0, 3), 0, 0);
                    context.restore();
                }
            });
        };

        function startMarbleRun() {
            const btn = document.getElementById('raceBtn');
            if (isRunning) {
                WorldClear();
                btn.textContent = 'START RUN';
                isRunning = false;
                return;
            }

            const nameInput = document.getElementById('rouletteNames').value;
            const names = nameInput.split(',').map(n => n.trim()).filter(n => n.length > 0);

            if (names.length < 2) {
                alert('ìµœì†Œ 2ëª… ì´ìƒì˜ ì´ë¦„ì„ ì…ë ¥í•´ì£¼ì„¸ìš”!');
                return;
            }

            const container = document.getElementById('matter-container');
            const rankList = document.getElementById('rankList');
            const board = document.getElementById('rankBoard');

            container.innerHTML = '';
            rankList.innerHTML = '';
            board.style.display = 'none';
            rankings = [];
            isRunning = true;
            btn.textContent = 'RESET';

            // 1. ì—”ì§„
            engine = Engine.create();
            engine.world.gravity.y = 0.2; // ì¤‘ë ¥ ë‚®ì¶¤ (ëŠë¦¬ê²Œ)

            // 2. ë Œë”ëŸ¬
            const width = container.offsetWidth;
            const height = container.offsetHeight;

            render = Render.create({
                element: container,
                engine: engine,
                options: {
                    width: width,
                    height: height,
                    wireframes: false,
                    background: '#222'
                }
            });

            // 3. ë§µ êµ¬ì„± (3ë‹¨ ì½”ìŠ¤)
            const wallOpts = { isStatic: true, render: { fillStyle: '#444' } };
            const pegOpts = { isStatic: true, render: { fillStyle: '#888' }, restitution: 0.5 };
            const bounceOpts = { isStatic: true, render: { fillStyle: '#666' }, restitution: 1.0 }; // ì˜ íŠ€ëŠ” ë²½

            Composite.add(engine.world, [
                Bodies.rectangle(0, height / 2, 20, height, wallOpts), // ì¢Œë²½
                Bodies.rectangle(width, height / 2, 20, height, wallOpts), // ìš°ë²½
            ]);

            // [1êµ¬ê°„] ìƒë‹¨ Plinko (í•€)
            const startY = 100;
            for (let row = 0; row < 5; row++) {
                const cols = row % 2 === 0 ? 6 : 5;
                const spacingX = width / (cols + 1);
                for (let col = 1; col <= cols; col++) {
                    Composite.add(engine.world, Bodies.circle(col * spacingX, startY + row * 50, 5, pegOpts));
                }
            }

            // [2êµ¬ê°„] ì¤‘ë‹¨ Spinners (íšŒì „ í’ì°¨)
            const spinnerY = 400;
            const createSpinner = (x, y) => {
                const spinner = Bodies.rectangle(x, y, 120, 10, {
                    label: 'spinner',
                    render: { fillStyle: '#E91E63' }
                });
                const constraint = Constraint.create({
                    pointA: { x: x, y: y },
                    bodyB: spinner,
                    stiffness: 1,
                    length: 0
                });
                return [spinner, constraint];
            };

            Composite.add(engine.world, createSpinner(width * 0.3, spinnerY));
            Composite.add(engine.world, createSpinner(width * 0.7, spinnerY));

            // [3êµ¬ê°„] í•˜ë‹¨ Funnel (ê¹”ë•Œê¸°)
            const slopeOpts = { isStatic: true, render: { fillStyle: '#555' }, angle: Math.PI * 0.15 };
            const slopeY = 600;

            Composite.add(engine.world, [
                // ì™¼ìª½ ê²½ì‚¬
                Bodies.rectangle(width * 0.2, slopeY, width * 0.6, 20, {
                    isStatic: true, angle: 0.5, render: { fillStyle: '#555' }, label: 'slope'
                }),
                // ì˜¤ë¥¸ìª½ ê²½ì‚¬
                Bodies.rectangle(width * 0.8, slopeY, width * 0.6, 20, {
                    isStatic: true, angle: -0.5, render: { fillStyle: '#555' }, label: 'slope'
                }),
                // ìµœì¢… ê¹”ë•Œê¸° ì…êµ¬ (ì¤‘ì•™) - ë²½ í¬ê¸° ì¶•ì†Œ
                Bodies.rectangle(width * 0.25, height - 100, width * 0.25, 15, { isStatic: true, angle: 0.6, render: { fillStyle: '#333' } }),
                Bodies.rectangle(width * 0.75, height - 100, width * 0.25, 15, { isStatic: true, angle: -0.6, render: { fillStyle: '#333' } })
            ]);

            // 4. êµ¬ìŠ¬ ìƒì„±
            const marbleRadius = 8;
            names.forEach((name, i) => {
                const x = width / 2 + (Math.random() - 0.5) * 50;
                const y = -100 - (i * 60); // ê°„ê²© ë„“í˜

                const marble = Bodies.circle(x, y, marbleRadius, {
                    restitution: 0.7,
                    friction: 0.001,
                    frictionAir: 0.02, // ê³µê¸° ì €í•­ (ì²œì²œíˆ ë–¨ì–´ì§)
                    label: name,
                    render: { fillStyle: colors[i % colors.length] }
                });
                Composite.add(engine.world, marble);
            });

            // 5. ì—…ë°ì´íŠ¸ & ì„¼ì„œ
            Events.on(render, 'afterRender', renderText);

            Events.on(engine, 'afterUpdate', function () {
                const bodies = Composite.allBodies(engine.world);
                bodies.forEach(body => {
                    // êµ¬ìŠ¬ë§Œ ì²´í¬
                    if (body.label && !['peg', 'wall', 'ground', 'spinner', 'slope'].includes(body.label)) {

                        // íšŒì „ í’ì°¨ ëŒë¦¬ê¸° (ê°•ì œ íšŒì „)
                        if (body.label === 'spinner') {
                            Body.setAngularVelocity(body, 0.15);
                        }

                        // ë°”ë‹¥ í†µê³¼ (ì œê±° & ë­í‚¹)
                        if (body.position.y > height + 20) {
                            if (!rankings.includes(body.label)) {
                                rankings.push(body.label);
                                addRankItem(rankings.length, body.label);

                                // ì›”ë“œì—ì„œ ì œê±° (ì‚¬ë¼ì§ íš¨ê³¼)
                                Composite.remove(engine.world, body);
                            }
                        }
                    }
                });
            });

            Render.run(render);
            runner = Runner.create();
            Runner.run(runner, engine);
        }

        function WorldClear() {
            if (render) {
                Render.stop(render);
                if (render.canvas) render.canvas.remove();
            }
            if (runner) Runner.stop(runner);
            if (engine) Engine.clear(engine);
            engine = null;
            render = null;
            runner = null;
        }

        function addRankItem(rank, name) {
            const board = document.getElementById('rankBoard');
            const list = document.getElementById('rankList');

            if (board.style.display === 'none') {
                board.style.display = 'block';
            }

            const item = document.createElement('div');
            item.className = 'rank-item';

            let medal = rank;
            if (rank === 1) medal = 'ğŸ¥‡ 1st';
            else if (rank === 2) medal = 'ğŸ¥ˆ 2nd';
            else if (rank === 3) medal = 'ğŸ¥‰ 3rd';
            else medal = rank + 'th';

            item.innerHTML = `<span>${medal}</span><span>${name}</span>`;
            list.appendChild(item);
            board.scrollTop = board.scrollHeight;
        }



        // ì˜ˆì‚° ì ê¸ˆí•´ì œ í•¨ìˆ˜
        let budgetUnlocked = false;
        const BUDGET_PASSWORD = '901210';
        let customItemCount = 0;

        function unlockBudget() {
            const inputs = document.querySelectorAll('.budget-input');
            const btn = document.getElementById('unlock-btn');
            const status = document.getElementById('budget-status');
            const addBtn = document.getElementById('add-item-btn');

            if (!budgetUnlocked) {
                const password = prompt('ë¹„ë°€ë²ˆí˜¸ë¥¼ ì…ë ¥í•˜ì„¸ìš”:');
                if (password !== BUDGET_PASSWORD) {
                    alert('ë¹„ë°€ë²ˆí˜¸ê°€ í‹€ë ¸ìŠµë‹ˆë‹¤!');
                    return;
                }
                inputs.forEach(input => input.disabled = false);
                btn.innerHTML = 'ğŸ”“ ì ê¸ˆ';
                status.textContent = 'âœï¸ ìˆ˜ì • ê°€ëŠ¥! ê°’ì„ ë³€ê²½í•˜ë©´ ìë™ ê³„ì‚°ë©ë‹ˆë‹¤';
                addBtn.style.display = 'block';
                budgetUnlocked = true;
            } else {
                inputs.forEach(input => input.disabled = true);
                btn.innerHTML = 'ğŸ”’ ì ê¸ˆí•´ì œ';
                status.textContent = 'ğŸ”’ ìˆ˜ì •í•˜ë ¤ë©´ ì ê¸ˆí•´ì œë¥¼ ëˆŒëŸ¬ì£¼ì„¸ìš”';
                addBtn.style.display = 'none';
                budgetUnlocked = false;
            }
        }

        function addBudgetItem() {
            addBudgetItemFromData('', 0, false);
        }

        function addBudgetItemFromData(label, value, confirmed) {
            customItemCount++;
            const container = document.getElementById('custom-budget-items');
            const itemId = `custom-item-${customItemCount}`;

            const row = document.createElement('div');
            row.className = 'budget-input-row';
            row.id = itemId;
            row.innerHTML = `
                <input type="checkbox" class="custom-confirmed" ${confirmed ? 'checked' : ''} onchange="onBudgetChange()"
                    style="width:20px; height:20px; margin-right:8px; accent-color:#4CAF50;">
                <input type="text" class="budget-label-input" placeholder="í•­ëª©ëª…" value="${label}"
                    style="flex:1; padding:8px; border:1px solid #ddd; border-radius:8px; font-size:0.9rem;" oninput="onBudgetChange()">
                <input type="number" class="budget-input custom-cost" value="${value}" oninput="onBudgetChange()">
                <span class="budget-unit">ì›</span>
                <button onclick="removeBudgetItem('${itemId}')" 
                    style="margin-left:8px; padding:6px 10px; background:#ff5252; color:white; border:none; border-radius:6px; cursor:pointer;">âœ•</button>
            `;

            // í™•ì •ëœ í•­ëª©ì€ ì´ˆë¡ìƒ‰ í…Œë‘ë¦¬
            if (confirmed) {
                row.style.border = '2px solid #4CAF50';
                row.style.background = '#f0fff0';
            }

            container.appendChild(row);
            onBudgetChange();
        }

        function removeBudgetItem(itemId) {
            const item = document.getElementById(itemId);
            if (item) {
                item.remove();
                onBudgetChange();
            }
        }

        // ì˜ˆì‚° ê³„ì‚° í•¨ìˆ˜ (ì˜ˆì‚° ê³„ì‚°ê¸°ì—ì„œ ê°’ ë³€ê²½ì‹œ)
        function onBudgetChange() {
            // BUDGET_CONFIG ì—…ë°ì´íŠ¸
            BUDGET_CONFIG.costs.flight = parseInt(document.getElementById('cost-flight').value) || 0;
            BUDGET_CONFIG.costs.rent = parseInt(document.getElementById('cost-rent').value) || 0;
            BUDGET_CONFIG.costs.day1Dinner = parseInt(document.getElementById('cost-day1-dinner').value) || 0;
            BUDGET_CONFIG.costs.park981 = parseInt(document.getElementById('cost-981').value) || 0;
            BUDGET_CONFIG.costs.day2Lunch = parseInt(document.getElementById('cost-day2-lunch').value) || 0;
            BUDGET_CONFIG.costs.day2Cafe = parseInt(document.getElementById('cost-day2-tour').value) || 0;
            BUDGET_CONFIG.costs.day2Dinner = parseInt(document.getElementById('cost-day2-dinner').value) || 0;

            // ì»¤ìŠ¤í…€ í•­ëª©ë“¤ ê³„ì‚° (ë°°ì—´ë¡œ ì €ì¥)
            const customRows = document.querySelectorAll('#custom-budget-items .budget-input-row');
            let customTotal = 0;
            const customItems = [];
            customRows.forEach((row) => {
                const labelInput = row.querySelector('.budget-label-input');
                const costInput = row.querySelector('.custom-cost');
                const confirmedInput = row.querySelector('.custom-confirmed');

                const label = labelInput ? labelInput.value || '' : '';
                const value = parseInt(costInput?.value) || 0;
                const confirmed = confirmedInput ? confirmedInput.checked : false;

                customItems.push({ label, value, confirmed });
                customTotal += value;

                // í™•ì •ëœ í•­ëª© ìŠ¤íƒ€ì¼ ì—…ë°ì´íŠ¸
                if (confirmed) {
                    row.style.border = '2px solid #4CAF50';
                    row.style.background = '#f0fff0';
                } else {
                    row.style.border = '';
                    row.style.background = '';
                }
            });
            BUDGET_CONFIG.costs.customItems = customItems;
            BUDGET_CONFIG.costs.customTotal = customTotal;

            // ëª¨ë“  í‘œì‹œ ì—…ë°ì´íŠ¸
            updateAllBudgetDisplays();
        }

        // í˜ì´ì§€ ë¡œë“œì‹œ ì˜ˆì‚° ì—…ë°ì´íŠ¸
        document.addEventListener('DOMContentLoaded', function () {
            updateAllBudgetDisplays();
        });

    </script>
</body>

</html>